<!-- docs/activity.md -->

# Activity-–¥–∏–∞–≥—Ä–∞–º–º–∞ —Å—Ü–µ–Ω–∞—Ä–∏—è ¬´–ü–∞—Ü–∏–µ–Ω—Ç –∑–∞–ø–∏—Å—ã–≤–∞–µ—Ç—Å—è –Ω–∞ –ø—Ä–∏—ë–º¬ª

```mermaid
flowchart TD
    %% swim-lanes (–ø—Å–µ–≤–¥–æ) —Å–ª–µ–≤–∞-–Ω–∞–ø—Ä–∞–≤–æ
    subgraph L1["üë§ –ü–∞—Ü–∏–µ–Ω—Ç"]
        P0([–ó–∞–ø—É—Å—Ç–∏—Ç—å –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å<br/>–∏–ª–∏ Telegram-–±–æ—Ç])
        P1([–í–≤–µ—Å—Ç–∏ –∂–∞–ª–æ–±—ã<br/>–∏–ª–∏ –≤—ã–±—Ä–∞—Ç—å –≤—Ä–∞—á–∞])
        P2([–í—ã–±—Ä–∞—Ç—å —Å–≤–æ–±–æ–¥–Ω–æ–µ –≤—Ä–µ–º—è])
        P3([–ü–æ–ª—É—á–∏—Ç—å –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ])
    end

    subgraph L2["ü§ñ –ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å / –ë–æ—Ç"]
        B0([–ó–∞–ø—Ä–æ—Å–∏—Ç—å —Å–∏–º–ø—Ç–æ–º—ã])
        B1([–û–ø—Ä–µ–¥–µ–ª–∏—Ç—å —Å–ø–µ—Ü–∏–∞–ª—å–Ω–æ—Å—Ç—å<br/>(ML / LLM)])
        B2([–ó–∞–ø—Ä–æ—Å–∏—Ç—å —Å–ª–æ—Ç—ã —É API])
        B3([–ü–æ–∫–∞–∑–∞—Ç—å —Å–ø–∏—Å–æ–∫ —Å–ª–æ—Ç–æ–≤])
        B4([–û—Ç–ø—Ä–∞–≤–∏—Ç—å –≤—ã–±–æ—Ä –≤ API])
        B5([–ü–æ–∫–∞–∑–∞—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç])
    end

    subgraph L3["üüß Appointments API"]
        A0([–ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å–≤–æ–±–æ–¥–µ–Ω –ª–∏ —Å–ª–æ—Ç])
        A1([–°–æ–∑–¥–∞—Ç—å –∑–∞–ø–∏—Å—å<br/>–≤ –ë–î])
        A2([–í–µ—Ä–Ω—É—Ç—å —É—Å–ø–µ—Ö<br/>–∏–ª–∏ 409 Conflict])
    end

    subgraph L4["üóÑÔ∏è PostgreSQL"]
        DB[(appointments<br/>UNIQUE doctor_id+start_time)]
    end

    %% –ø–æ—Ç–æ–∫
    P0 --> B0 --> P1 --> B1
    B1 --> B2 --> A0 --> DB
    DB -- —Å–≤–æ–±–æ–¥–Ω–æ --> A1 --> DB
    DB --> A2
    A2 -- 201 Created --> B3 --> P2
    P2 --> B4 --> A0
    DB -- —Å–≤–æ–±–æ–¥–Ω–æ? --> A1
    A2 -- 201 Created --> B5 --> P3
    DB -- –∫–æ–Ω—Ñ–ª–∏–∫—Ç --> A2
    A2 -- 409 Conflict --> B3  %% –ø–∞—Ü–∏–µ–Ω—Ç –≤—ã–±–∏—Ä–∞–µ—Ç –¥—Ä—É–≥–æ–µ –≤—Ä–µ–º—è

    %% —Å—Ç–∏–ª–∏
    style P0 fill:#f5f5f5,stroke:#999
    style B0 fill:#e0f7fa,stroke:#00acc1
    style A0 fill:#fff8e1,stroke:#ffb300
    style DB fill:#e8eaf6,stroke:#3f51b5
